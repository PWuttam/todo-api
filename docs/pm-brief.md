# 📋 PM Brief: ToDo API Project

## 1) 依頼者・背景

- **想定依頼者**：社内ツールを整備したい小規模チームのPM “Aさん”
- **背景**：タスク管理がスプレッドシートで分散し、抜け漏れ・重複が増加。まずはAPIから整えて後続のフロントやCLIに繋げたい。

---

## 2) ゴール/非ゴール（スコープ）

- **ゴール（今回の範囲）**
  - REST APIでToDoのCRUDができる
  - MongoDBに保存できる
  - READMEと環境設定手順が整備されている
  - 簡単なエラーハンドリングとバリデーション（title必須）
- **非ゴール（次回以降）**
  - 認証（JWT）
  - リマインダー/通知
  - 共有・権限管理
  - カレンダー連携

---

## 3) 成功条件（受け入れ基準 / Definition of Done）

- `POST /todos` に `{ "title":"..." }` を送ると201で作成され、DBに保存される
- `GET /todos` が配列で返る（作成降順）
- `PUT /todos/:id` で更新後のJSONが返る（存在しないIDは404）
- `DELETE /todos/:id` で204が返る（存在しないIDは404）
- `.env.example` からローカルで起動・検証できること（READMEの手順通りでOK）
- 簡易ヘルスチェック `GET /` で `{ ok: true }` が返る

\* titleは必須、空文字は400

---

## 4) ユーザーストーリー

- **開発者として** APIを使ってToDoを作成・更新・削除・一覧取得したい。
  - 受け入れ条件：上記CRUDエンドポイントがHTTP/JSONで安定して動作する。
- **将来のプロダクトオーナーとして** 機能追加（認証/タグ/ステータス/カレンダー連携）がしやすい構成にしたい。
  - 受け入れ条件：ルーティング/モデル/設定が分離され、READMEに拡張方針が記載されている。

---

## 5) マイルストーン案

- **M1: プロジェクト初期化**（Day 0）
  - Node/Express雛形、Mongo接続、README、.env.example
- **M2: CRUD 完成**（Day 1）
  - モデル・ルート・コントローラ、基本バリデーション、簡易テスト（curl例）
- **M3: 品質向上**（Day 2）
  - エラー形式の統一、lint/prettier、.gitignore、サンプルデータ
- **M4: 次回拡張の設計メモ**（Day 2）
  - JWT導入方針、タグ/ステータスの拡張案、カレンダー連携の叩き台

※実際の日付は柔軟に調整可能

---

## 6) 非機能要件（NFR）

- **可読性**：ディレクトリ分割（models/routes/controllers/config）
- **環境**：`.env` で差し替え可能（ローカル/Atlas）
- **ログ**：起動/DB接続ログ、エラー時のメッセージ統一
- **保守性**：ミドルウェア追加で認証/レートリミットを将来差し込み可能

---

## 7) リスク & 対応

- **Mongoが繋がらない**：ローカルURI→Atlas URIへ切替手順をREADMEに追記
- **スキーマ変更**：Mongooseスキーマは後方互換を意識（optional化、migrationメモ）
- **CORS**：将来のフロント接続を見越し、現状は`cors()`で全許可→必要に応じて制限

---

## 8) コミュニケーション/運用

- **リポジトリ**：`todo-api`
- **ブランチ運用**：`main`（保護） / `feature/*`（PR前提）
- **レビュー観点**：命名、重複ロジック、バリデーション、例外処理、doc整備
- **ドキュメント**：README、`/docs/pm-brief.md`（このPMシート）
